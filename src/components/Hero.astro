---
const {
  title = "",
  lead = "",
  kicker = "",
  variant = "default", // "home" | "services" | "realisations" | "blog" | "contact" | "default"
  actions = [], // [{ href, label, kind: "accent"|"ghost"|"primary" }]
  bleed = false, // ⬅️ new: full-bleed background while content stays centered
} = Astro.props;
---

<section class={`hero hero--${variant} ${bleed ? "is-bleed" : ""}`}>
  <div class="hero__inner">
    {kicker && <p class="kicker">{kicker}</p>}
    {title && <h1>{title}</h1>}
    {lead && <p class="lead">{lead}</p>}

    {
      actions.length > 0 && (
        <div class="hero-actions">
          {actions.map((a: any) => (
            <a
              class={`btn ${a.kind === "accent" ? "btn--accent" : a.kind === "ghost" ? "btn--ghost" : ""}`}
              href={a.href}
            >
              {a.label}
            </a>
          ))}
        </div>
      )
    }
  </div>
</section>

<style>
  .hero {
    position: relative;
    padding-block: 2.6rem 1.25rem;
    border-bottom: 1px solid var(--border);
    overflow: hidden; /* guard */
  }

  /* ✅ Centered content even when background is full-bleed */
  .hero__inner {
    max-width: 1100px;
    margin: 0 auto;
    padding-inline: clamp(12px, 2vw, 24px);
  }

  /* Full-bleed background handled via ::before */
  .is-bleed::before {
    content: "";
    position: absolute;
    z-index: -1;
    left: 50%;
    transform: translateX(-50%);
    width: 100vw;
    top: 0;
    bottom: 0;
    pointer-events: none;
  }

  /* Variants define the gradient color on the ::before layer */
  .is-bleed.hero--home::before {
    background: linear-gradient(
      180deg,
      color-mix(in oklab, var(--card) 45%, transparent),
      transparent
    );
  }
  .is-bleed.hero--services::before {
    background: linear-gradient(
      180deg,
      color-mix(in oklab, var(--green) 12%, var(--bg)),
      var(--bg)
    );
  }
  .is-bleed.hero--realisations::before {
    background: linear-gradient(
      180deg,
      color-mix(in oklab, var(--orange) 10%, var(--bg)),
      var(--bg)
    );
  }
  .is-bleed.hero--blog::before {
    background: linear-gradient(
      180deg,
      color-mix(in oklab, var(--gray) 12%, var(--bg)),
      var(--bg)
    );
  }
  .is-bleed.hero--contact::before {
    background: linear-gradient(
      180deg,
      color-mix(in oklab, var(--green) 16%, var(--bg)),
      var(--bg)
    );
  }

  /* If not bleeding, keep a subtle background inside the container only (optional) */
  .hero--home:not(.is-bleed) {
    background: linear-gradient(
      180deg,
      color-mix(in oklab, var(--card) 45%, transparent),
      transparent
    );
  }
  .hero--services:not(.is-bleed) {
    background: linear-gradient(
      180deg,
      color-mix(in oklab, var(--green) 12%, var(--bg)),
      var(--bg)
    );
  }
  .hero--realisations:not(.is-bleed) {
    background: linear-gradient(
      180deg,
      color-mix(in oklab, var(--orange) 10%, var(--bg)),
      var(--bg)
    );
  }
  .hero--blog:not(.is-bleed) {
    background: linear-gradient(
      180deg,
      color-mix(in oklab, var(--gray) 12%, var(--bg)),
      var(--bg)
    );
  }
  .hero--contact:not(.is-bleed) {
    background: linear-gradient(
      180deg,
      color-mix(in oklab, var(--green) 16%, var(--bg)),
      var(--bg)
    );
  }

  .hero h1 {
    font-family: "Josefin Sans", sans-serif;
    font-weight: 700;
    margin: 0 0 0.45rem;
    font-size: clamp(1.9rem, 2vw + 1rem, 2.5rem);
    letter-spacing: -0.01em;
  }
  .hero .lead {
    margin: 0.2rem 0 1rem;
    color: var(--muted);
    max-width: 68ch;
    line-height: 1.6;
  }
  .hero .kicker {
    display: inline-block;
    font:
      600 0.8rem/1 "Lato",
      sans-serif;
    letter-spacing: 0.02em;
    padding: 0.28rem 0.5rem;
    border-radius: 999px;
    border: 1px solid var(--border);
    color: var(--fg);
    margin: 0 0 0.6rem;
    background: color-mix(in oklab, var(--card) 60%, transparent);
  }
  .hero-actions {
    display: flex;
    gap: 0.6rem;
    flex-wrap: wrap;
    margin-top: 0.2rem;
  }
</style>
