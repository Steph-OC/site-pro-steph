---
import IosPointer from "@/components/IosPointer.jsx";

const {
  title = "Stéphanie Quibel — Développeuse WordPress",
  description = "",
} = Astro.props;

import "../styles/theme.css";
---

<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    {description && <meta name="description" content={description} />}

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@600;700&family=Lato:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link rel="icon" href="/favicon.png" type="image/png" />
    <meta name="theme-color" content="#23212E" />

    <!-- Anti-FOUC : applique la préférence avant paint -->
    <script is:inline>
      (() => {
        try {
          const pref = localStorage.getItem("theme-pref") || "light";
          document.documentElement.dataset.theme =
            pref === "dark" ? "dark" : "light";
        } catch {}
      })();
    </script>

    <!-- Script du toggle (fichier public/js/theme-toggle.js) -->
    <script src="/js/theme-toggle.js" defer></script>
  </head>

  <body>
    <header>
      <div class="container nav">
        <a class="brand" href="/">
          <img
            class="brand-logo"
            src="/logo.svg"
            alt="Stéphanie Quibel"
            width="80"
            height="80"
          />
        </a>

        <nav aria-label="Navigation principale">
          <ul>
            <li>
              <a
                href="/"
                aria-current={Astro.url.pathname === "/" ? "page" : undefined}
                >Accueil</a
              >
            </li>
            <li>
              <a
                href="/services"
                aria-current={Astro.url.pathname.startsWith("/services")
                  ? "page"
                  : undefined}>Services</a
              >
            </li>
            <li>
              <a
                href="/realisations"
                aria-current={Astro.url.pathname.startsWith("/realisations")
                  ? "page"
                  : undefined}>Réalisations</a
              >
            </li>
            <li>
              <a
                href="/blog"
                aria-current={Astro.url.pathname.startsWith("/blog")
                  ? "page"
                  : undefined}>Parlons web</a
              >
            </li>
            <li><a href="/#a-propos">À propos</a></li>
            <li>
              <a
                href="/contact"
                class="btn btn--ghost"
                aria-current={Astro.url.pathname.startsWith("/contact")
                  ? "page"
                  : undefined}>Contact</a
              >
            </li>
          </ul>
        </nav>

        <!-- Toggle Light ↔ Dark -->
        <button
          type="button"
          class="btn btn--ghost"
          data-theme-toggle
          aria-label="Basculer le thème"
          title="Changer le thème (Clair ↔ Sombre)"
        >
          <span aria-hidden="true" data-theme-icon>☀️</span>
        </button>
      </div>
    </header>

    <slot name="hero" />

    <main class="container">
      <slot />
    </main>

    <footer>
      <div class="container foot">
        <span>© {new Date().getFullYear()} Stéphanie Quibel</span>
        <span><a href="/mentions-legales">Mentions légales</a></span>
      </div>
    </footer>

    <!-- Le composant doit être DANS <body> (pas entre </head> et <body>) -->
    <IosPointer
      client:idle
      color="var(--green)"
      radius={12}
      pad={6}
      magnetRadius={90}
      targets='[data-pointer], .nav a, a[href], button, [role="button"]'
    />
  </body>
</html>
