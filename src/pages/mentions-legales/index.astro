---
import SiteLayout from "@/layouts/SiteLayout.astro";
import "@/styles/wp-content.css";

const WP = (import.meta.env.WP_URL || "").replace(/\/+$/, "");

let page = null;
if (WP) {
  const r = await fetch(
    `${WP}/wp-json/wp/v2/pages?slug=mentions-legales&_fields=title,content,slug`
  );
  if (r.ok) {
    const arr = await r.json();
    page = Array.isArray(arr) ? arr[0] : null;
  }
}

const title = page?.title?.rendered || "Mentions légales";
const html = page?.content?.rendered || "<p>Contenu à venir.</p>";
---

<SiteLayout title={title}>
  <article class="wp-content mentions">
    <h1 set:html={title} />
    <div class="entry" set:html={html} />
  </article>
</SiteLayout>

<style is:global>
  .mentions {
    margin-top: 150px;
  }
</style>
