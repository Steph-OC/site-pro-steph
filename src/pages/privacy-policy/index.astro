---
// src/pages/politique-de-confidentialite.astro (par ex.)
import SiteLayout from "@/layouts/SiteLayout.astro";
import "@/styles/wp-content.css";
import "@/styles/background.css";

const WP = (import.meta.env.WP_URL || "").replace(/\/+$/, "");

// slug de la page WP
const WP_PRIVACY_SLUG = "politique-de-confidentialite";

let page = null;
if (WP) {
  const r = await fetch(
    `${WP}/wp-json/wp/v2/pages?slug=${encodeURIComponent(
      WP_PRIVACY_SLUG
    )}&_fields=title,content,slug`
  );
  if (r.ok) {
    const arr = await r.json();
    page = Array.isArray(arr) ? arr[0] : null;
  }
}

const title = page?.title?.rendered || "Politique de confidentialité";
const html = page?.content?.rendered || "<p>Contenu à venir.</p>";
---

<SiteLayout title={title}>
  <article class="wp-content conf">
    <h1 set:html={title} />
    <div class="entry" set:html={html} />
  </article>
</SiteLayout>

<style is:global>
  .conf {
    margin-top: 150px;
  }
</style>
